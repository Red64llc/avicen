<h1 class="text-2xl font-bold mb-6">Camera Controller Test</h1>

<div class="max-w-md">
  <%# Test widget for camera_controller.js Stimulus controller %>
  <div data-controller="camera"
       data-camera-max-size-value="10485760"
       class="space-y-4">

    <%# Preview target - shows image preview after file selection %>
    <div data-camera-target="preview"
         class="border-2 border-dashed border-gray-300 rounded-lg p-4 min-h-[200px] flex items-center justify-center">
      <span class="text-gray-400">Image preview will appear here</span>
    </div>

    <%# Progress indicator target - shows upload progress %>
    <div data-camera-target="progress" class="hidden">
      <div class="h-2 bg-gray-200 rounded-full overflow-hidden">
        <div class="h-full bg-blue-600 transition-all duration-300" style="width: 0%"></div>
      </div>
      <span class="text-sm text-gray-500 mt-1">Uploading...</span>
    </div>

    <%# Error message target - shows validation errors %>
    <div data-camera-target="error" class="hidden text-red-600 text-sm"></div>

    <%# Retry button target - shown after upload errors (Requirement 1.7) %>
    <button type="button"
            data-camera-target="retryButton"
            data-action="click->camera#retry"
            class="hidden px-4 py-2 text-sm text-blue-600 hover:text-blue-800 underline">
      Try again
    </button>

    <%# File input target %>
    <div class="space-y-2">
      <label for="camera_input" class="block text-sm font-medium text-gray-700">
        Select image file
      </label>
      <input type="file"
             id="camera_input"
             name="image"
             accept="image/jpeg,image/png,image/heic,application/pdf"
             data-camera-target="input"
             data-action="change->camera#handleFileSelect"
             class="block w-full text-sm text-gray-500
                    file:mr-4 file:py-2 file:px-4
                    file:rounded-full file:border-0
                    file:text-sm file:font-semibold
                    file:bg-blue-50 file:text-blue-700
                    hover:file:bg-blue-100" />
    </div>

    <%# Submit button target %>
    <button type="button"
            data-camera-target="submitButton"
            disabled
            class="w-full px-4 py-2 bg-blue-600 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed">
      Continue
    </button>
  </div>
</div>
