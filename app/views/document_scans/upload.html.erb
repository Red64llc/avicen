<%= turbo_frame_tag "document_scan_flow" do %>
  <div class="document-scan-container">
    <h1 class="text-2xl font-semibold mb-6">Select Document Type</h1>

    <p class="mb-6 text-gray-600">
      What type of document did you scan? This helps us extract the right information.
    </p>

    <%= form_with url: extract_document_scans_path, method: :post, scope: :scan, local: false, data: { turbo_frame: "document_scan_flow" } do |form| %>
      <%= form.hidden_field :blob_id, value: @blob.id %>

      <div class="space-y-6">
        <!-- Document Type Selection -->
        <fieldset class="space-y-4">
          <legend class="sr-only">Document Type</legend>

          <label class="flex items-center p-4 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors">
            <%= form.radio_button :document_type, "prescription", class: "h-4 w-4 text-primary border-gray-300", checked: true %>
            <span class="ml-3">
              <span class="block text-sm font-medium text-gray-900">Prescription</span>
              <span class="block text-sm text-gray-500">Medication orders from your doctor</span>
            </span>
          </label>

          <label class="flex items-center p-4 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors">
            <%= form.radio_button :document_type, "biology_report", class: "h-4 w-4 text-primary border-gray-300" %>
            <span class="ml-3">
              <span class="block text-sm font-medium text-gray-900">Lab Report</span>
              <span class="block text-sm text-gray-500">Blood tests and other lab results</span>
            </span>
          </label>
        </fieldset>

        <!-- Processing Options -->
        <div class="border-t pt-4">
          <label class="flex items-center">
            <%= form.check_box :background, { class: "h-4 w-4 text-primary border-gray-300 rounded" }, "1", "0" %>
            <span class="ml-2 text-sm text-gray-600">
              Process in background (recommended for large documents)
            </span>
          </label>
        </div>

        <!-- Navigation -->
        <div class="flex justify-between">
          <%= link_to "Back", new_document_scan_path, class: "btn btn--secondary", data: { turbo_frame: "document_scan_flow" } %>
          <%= form.submit "Extract Data", class: "btn btn--primary" %>
        </div>
      </div>
    <% end %>
  </div>
<% end %>
